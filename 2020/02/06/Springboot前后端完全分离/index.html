<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Record what you do and what you think.">
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Springboot前后端完全分离 - Joshua Tim-仲谦的博客 | Joshua Tim&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> An INTJ blog; subscribe to me, you can know what you never knew </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar radius">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Joshua Tim-仲谦</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#代码"><span class="toc-text">代码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#前端"><span class="toc-text">前端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#html"><span class="toc-text">html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JS"><span class="toc-text">JS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#后端"><span class="toc-text">后端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#security配置类——AppAuthenticationSuccessHandler"><span class="toc-text">security配置类——AppAuthenticationSuccessHandler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#security配置类——AppSecurityConfigurer"><span class="toc-text">security配置类——AppSecurityConfigurer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#security配置类——CustomAuthenticationFilter"><span class="toc-text">security配置类——CustomAuthenticationFilter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#security配置类——MyPasswordEncoder"><span class="toc-text">security配置类——MyPasswordEncoder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户服务类–UserService"><span class="toc-text">用户服务类–UserService</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON自制封装模块"><span class="toc-text">JSON自制封装模块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#链接"><span class="toc-text">链接</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> An INTJ blog; subscribe to me, you can know what you never knew </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Springboot前后端完全分离
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-02-06 21:50:04</span></span>
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content no-indent">
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li>我在毕设时为了方便设备与用户使用同一套后端而做的设置。</li>
<li>Springboot在分离前后端时可以直接使用JSON传输。</li>
<li>如果有做权限需求，其实这个最重要的就是Spring Security JSON化问题，其他问题差不多就只是增删查改。</li>
<li>这个security JSON化在网页上一搜就很多，但是可以直接拿来使用是真的没有。SO我就直接把我的代码贴出来啦。</li>
</ul>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;form class=&quot;layui-form changePwd&quot;&gt;</span><br><span class="line">	&lt;div style=&quot;margin:0 0 15px 110px;color:#f00;&quot;&gt;使用说明：用户名与密码不得低于6位数！&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;layui-form-item&quot;&gt;</span><br><span class="line">	    &lt;label class=&quot;layui-form-label&quot;&gt;用户名&lt;/label&gt;</span><br><span class="line">	    &lt;div class=&quot;layui-input-block&quot;&gt;</span><br><span class="line">	    	&lt;input type=&quot;text&quot; value=&quot;&quot; placeholder=&quot;请输入用户名&quot; lay-verify=&quot;required|userName&quot; id=&quot;userName&quot; class=&quot;layui-input &quot;&gt;</span><br><span class="line">	    &lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;layui-form-item&quot;&gt;</span><br><span class="line">	    &lt;label class=&quot;layui-form-label&quot;&gt;密码&lt;/label&gt;</span><br><span class="line">	    &lt;div class=&quot;layui-input-block&quot;&gt;</span><br><span class="line">	    	&lt;input type=&quot;password&quot; value=&quot;&quot; placeholder=&quot;请输入密码&quot; lay-verify=&quot;required|newPwd&quot; id=&quot;newPwd&quot; class=&quot;layui-input pwd&quot;&gt;</span><br><span class="line">	    &lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;layui-form-item&quot;&gt;</span><br><span class="line">	    &lt;div class=&quot;layui-input-block&quot;&gt;</span><br><span class="line">	    	&lt;button class=&quot;layui-btn&quot; lay-submit=&quot;&quot; lay-filter=&quot;login&quot;&gt;立即登陆&lt;/button&gt;</span><br><span class="line">			&lt;button type=&quot;reset&quot; class=&quot;layui-btn layui-btn-primary&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">	    &lt;/div&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h3 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">form.on(&quot;submit(login)&quot;,function(data)&#123;</span><br><span class="line">        	var index = layer.msg(&apos;提交中，请稍候&apos;,&#123;icon: 16,time:false,shade:0.8&#125;);</span><br><span class="line">        	$.ajax(&#123;</span><br><span class="line">    			url : &quot;login&quot;,</span><br><span class="line">    			type : &quot;post&quot;,</span><br><span class="line">    			// data表示发送的数据</span><br><span class="line">    			data : JSON.stringify(&#123;</span><br><span class="line">    				&quot;$&#123;_csrf.parameterName&#125;&quot;:&quot;$&#123;_csrf.token&#125;&quot;,</span><br><span class="line">    				userName : $(&quot;#userName&quot;).val(),</span><br><span class="line">    				password : $(&quot;#newPwd&quot;).val()</span><br><span class="line">    			&#125;),</span><br><span class="line">    			// 定义发送请求的数据格式为JSON字符串</span><br><span class="line">    			contentType : &quot;application/json;charset=UTF-8&quot;,</span><br><span class="line">    			// 定义回调响应的数据格式为JSON字符串,该属性可以省略</span><br><span class="line">    			dataType : &quot;json&quot;,</span><br><span class="line">    			// 成功响应的结果</span><br><span class="line">    			success : function(data) &#123;</span><br><span class="line">    				layer.msg(data.information);</span><br><span class="line">    				if (data.status == &quot;200&quot;) &#123;</span><br><span class="line">    					window.location.href = &apos;index.html&apos;;</span><br><span class="line">    					return true;</span><br><span class="line">    				&#125;</span><br><span class="line">    				return false;</span><br><span class="line">    			&#125;,</span><br><span class="line">    			error : function(data) &#123;</span><br><span class="line">    				layer.msg(data.information);</span><br><span class="line">    			&#125;</span><br><span class="line">    		&#125;);</span><br><span class="line">        	return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><h3 id="security配置类——AppAuthenticationSuccessHandler"><a href="#security配置类——AppAuthenticationSuccessHandler" class="headerlink" title="security配置类——AppAuthenticationSuccessHandler"></a>security配置类——AppAuthenticationSuccessHandler</h3><ul>
<li>看名字就知道是什么类了<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collection;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line">import org.springframework.security.core.Authentication;</span><br><span class="line">import org.springframework.security.core.GrantedAuthority;</span><br><span class="line">import org.springframework.security.web.DefaultRedirectStrategy;</span><br><span class="line">import org.springframework.security.web.RedirectStrategy;</span><br><span class="line">import org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class AppAuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler&#123;</span><br><span class="line">	// Spring Security 通过RedirectStrategy对象负责所有重定向事务</span><br><span class="line">		private RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();</span><br><span class="line"></span><br><span class="line">		/*</span><br><span class="line">		 * 重写handle方法，方法中通过RedirectStrategy对象重定向到指定的url</span><br><span class="line">		 * */</span><br><span class="line">		@Override</span><br><span class="line">		protected void handle(HttpServletRequest request, HttpServletResponse response,</span><br><span class="line">				Authentication authentication)</span><br><span class="line">				throws IOException &#123;</span><br><span class="line">			// 通过determineTargetUrl方法返回需要跳转的url </span><br><span class="line">			String targetUrl = determineTargetUrl(authentication);</span><br><span class="line">			// 重定向请求到指定的url</span><br><span class="line">			redirectStrategy.sendRedirect(request, response, targetUrl);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		/*</span><br><span class="line">		 * 从Authentication对象中提取角色提取当前登录用户的角色，并根据其角色返回适当的URL。</span><br><span class="line">		 */</span><br><span class="line">		protected String determineTargetUrl(Authentication authentication) &#123;</span><br><span class="line">			String url = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">			// 获取当前登录用户的角色权限集合</span><br><span class="line">			Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();</span><br><span class="line"></span><br><span class="line">			List&lt;String&gt; roles = new ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">			// 将角色名称添加到List集合</span><br><span class="line">			for (GrantedAuthority a : authorities) &#123;</span><br><span class="line">				roles.add(a.getAuthority());</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			// 判断不同角色跳转到不同的url</span><br><span class="line">			if (isAdmin(roles)) &#123;</span><br><span class="line">				url = &quot;/page/admin/index.html&quot;;</span><br><span class="line">			&#125; else if (isUser(roles)) &#123;</span><br><span class="line">				url = &quot;/index.html&quot;;</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				url = &quot;/page/404.html&quot;;</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(&quot;url = &quot; + url);</span><br><span class="line">			return url;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		private boolean isUser(List&lt;String&gt; roles) &#123;</span><br><span class="line">			if (roles.contains(&quot;ROLE_USER&quot;)) &#123;</span><br><span class="line">				return true;</span><br><span class="line">			&#125;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		private boolean isAdmin(List&lt;String&gt; roles) &#123;</span><br><span class="line">			if (roles.contains(&quot;ROLE_ADMIN&quot;)) &#123;</span><br><span class="line">				return true;</span><br><span class="line">			&#125;</span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		public void setRedirectStrategy(RedirectStrategy redirectStrategy) &#123;</span><br><span class="line">			this.redirectStrategy = redirectStrategy;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		protected RedirectStrategy getRedirectStrategy() &#123;</span><br><span class="line">			return redirectStrategy;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="security配置类——AppSecurityConfigurer"><a href="#security配置类——AppSecurityConfigurer" class="headerlink" title="security配置类——AppSecurityConfigurer"></a>security配置类——AppSecurityConfigurer</h3><ul>
<li>Security核心配置类<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.security.authentication.AuthenticationProvider;</span><br><span class="line">import org.springframework.security.authentication.dao.DaoAuthenticationProvider;</span><br><span class="line">import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;</span><br><span class="line">import org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line">import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line">import org.springframework.security.core.Authentication;</span><br><span class="line">import org.springframework.security.core.AuthenticationException;</span><br><span class="line">import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line">import org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line">import org.springframework.security.web.authentication.AuthenticationFailureHandler;</span><br><span class="line">import org.springframework.security.web.authentication.AuthenticationSuccessHandler;</span><br><span class="line">import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;</span><br><span class="line"></span><br><span class="line">import com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"></span><br><span class="line">import ink.mastermind.AllINOne.pojo.Json;</span><br><span class="line">import ink.mastermind.AllINOne.service.UserService;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 自定义Spring Security认证处理类的时候</span><br><span class="line"> * 我们需要继承自WebSecurityConfigurerAdapter来完成，相关配置重写对应 方法即可。 </span><br><span class="line"> * */</span><br><span class="line">@Configuration</span><br><span class="line">public class AppSecurityConfigurer extends WebSecurityConfigurerAdapter&#123;</span><br><span class="line"></span><br><span class="line">	// 依赖注入用户服务类</span><br><span class="line">	@Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line">	</span><br><span class="line">	// 依赖注入加密接口</span><br><span class="line">	@Autowired</span><br><span class="line">    private PasswordEncoder passwordEncoder;</span><br><span class="line">	</span><br><span class="line">	// 依赖注入用户认证接口</span><br><span class="line">	@Autowired</span><br><span class="line">    private AuthenticationProvider authenticationProvider;</span><br><span class="line">	</span><br><span class="line">	// 依赖注入认证处理成功类，验证用户成功后处理不同用户跳转到不同的页面</span><br><span class="line">	@Autowired</span><br><span class="line">	AppAuthenticationSuccessHandler appAuthenticationSuccessHandler;</span><br><span class="line">	</span><br><span class="line">	/*</span><br><span class="line">	 *  BCryptPasswordEncoder是Spring Security提供的PasswordEncoder接口是实现类</span><br><span class="line">	 *  用来创建密码的加密程序，避免明文存储密码到数据库</span><br><span class="line">	 */</span><br><span class="line">	@Bean</span><br><span class="line">    public PasswordEncoder passwordEncoder() &#123;</span><br><span class="line">        return new BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">	 </span><br><span class="line">	// DaoAuthenticationProvider是Spring Security提供AuthenticationProvider的实现</span><br><span class="line">	@Bean</span><br><span class="line">    public AuthenticationProvider authenticationProvider() &#123;</span><br><span class="line">		System.out.println(&quot;AuthenticationProvider authenticationProvider&quot;);</span><br><span class="line">		// 创建DaoAuthenticationProvider对象</span><br><span class="line">        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();</span><br><span class="line">        // 不要隐藏&quot;用户未找到&quot;的异常</span><br><span class="line">        provider.setHideUserNotFoundExceptions(false);</span><br><span class="line">        // 通过重写configure方法添加自定义的认证方式。</span><br><span class="line">        provider.setUserDetailsService(userService);</span><br><span class="line">        // 设置密码加密程序认证</span><br><span class="line">        provider.setPasswordEncoder(passwordEncoder);</span><br><span class="line">        </span><br><span class="line">        //new BCryptPasswordEncoder().encode(fkUser.getPassword().trim()))</span><br><span class="line">        return provider;</span><br><span class="line">    &#125;</span><br><span class="line">	@Bean</span><br><span class="line">	CustomAuthenticationFilter customAuthenticationFilter() throws Exception &#123;</span><br><span class="line">	    CustomAuthenticationFilter filter = new CustomAuthenticationFilter();</span><br><span class="line">	    filter.setAuthenticationSuccessHandler(new AuthenticationSuccessHandler() &#123;</span><br><span class="line">	        @Override</span><br><span class="line">	        public void onAuthenticationSuccess(HttpServletRequest req, HttpServletResponse resp, Authentication authentication) throws IOException, ServletException &#123;</span><br><span class="line">	            resp.setContentType(&quot;application/json;charset=utf-8&quot;);</span><br><span class="line">	            PrintWriter out = resp.getWriter();</span><br><span class="line">	            Json json = new Json(200, &quot;登录成功&quot;, null);</span><br><span class="line">	            out.write(new ObjectMapper().writeValueAsString(json));</span><br><span class="line">	            out.flush();</span><br><span class="line">	            out.close();</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;);</span><br><span class="line">	    filter.setAuthenticationFailureHandler(new AuthenticationFailureHandler() &#123;</span><br><span class="line">	        @Override</span><br><span class="line">	        public void onAuthenticationFailure(HttpServletRequest req, HttpServletResponse resp, AuthenticationException e) throws IOException, ServletException &#123;</span><br><span class="line">	            resp.setContentType(&quot;application/json;charset=utf-8&quot;);</span><br><span class="line">	            PrintWriter out = resp.getWriter();</span><br><span class="line">	            Json json = new Json(500, &quot;登录失败&quot;, null);</span><br><span class="line">	            out.write(new ObjectMapper().writeValueAsString(json));</span><br><span class="line">	            out.flush();</span><br><span class="line">	            out.close();</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;);</span><br><span class="line">	    filter.setAuthenticationManager(authenticationManagerBean());</span><br><span class="line">	    return filter;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">    @Override</span><br><span class="line">    protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123;</span><br><span class="line">    	System.out.println(&quot;AppSecurityConfigurer configure auth......&quot;);</span><br><span class="line">    	// 设置认证方式。</span><br><span class="line">    	auth.authenticationProvider(authenticationProvider);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 设置了登录页面，而且登录页面任何人都可以访问，然后设置了登录失败地址，也设置了注销请求，注销请求也是任何人都可以访问的。 </span><br><span class="line">     * permitAll表示该请求任何人都可以访问，.anyRequest().authenticated(),表示其他的请求都必须要有权限认证。</span><br><span class="line">     * */</span><br><span class="line">    @Override</span><br><span class="line">    protected void configure(HttpSecurity http) throws Exception &#123;</span><br><span class="line">    	System.out.println(&quot;AppSecurityConfigurer configure http......&quot;);</span><br><span class="line">    	http.csrf().disable();</span><br><span class="line">    	http.headers().frameOptions().sameOrigin();</span><br><span class="line">    	http.authorizeRequests()</span><br><span class="line">    	// spring-security 5.0 之后需要过滤静态资源</span><br><span class="line">    	.antMatchers(&quot;/register.html&quot;,&quot;/register&quot;,</span><br><span class="line">    			&quot;/login.html&quot;,&quot;/login&quot;,</span><br><span class="line">    			&quot;/findPassword.html&quot;,&quot;/findPassword&quot;,</span><br><span class="line">    			&quot;/json/**&quot;,&quot;/layui/**&quot;,&quot;/images/**&quot;,&quot;/css/**&quot;,&quot;/js/**&quot;).permitAll() </span><br><span class="line">	  	.antMatchers(&quot;/page/**&quot;).hasAnyRole(&quot;USER&quot;,&quot;ADMIN&quot;)</span><br><span class="line">	  	.antMatchers(&quot;/admin/**&quot;).hasAnyRole(&quot;ADMIN&quot;)</span><br><span class="line">	  	.anyRequest().authenticated()</span><br><span class="line">	  	.and()</span><br><span class="line">	  	.formLogin().loginPage(&quot;/login&quot;).successHandler(appAuthenticationSuccessHandler)</span><br><span class="line">	  	.usernameParameter(&quot;userName&quot;).passwordParameter(&quot;password&quot;)</span><br><span class="line">	  	.and()</span><br><span class="line">	  	.logout().permitAll()</span><br><span class="line">	  	.and()</span><br><span class="line">	  	.exceptionHandling().accessDeniedPage(&quot;/login.html&quot;);</span><br><span class="line">        http.addFilterAt(customAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="security配置类——CustomAuthenticationFilter"><a href="#security配置类——CustomAuthenticationFilter" class="headerlink" title="security配置类——CustomAuthenticationFilter"></a>security配置类——CustomAuthenticationFilter</h3><ul>
<li>这个是一个读取JSON的过滤器。它是继承UsernamePasswordAuthenticationFilter的。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line">import org.springframework.http.MediaType;</span><br><span class="line">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line">import org.springframework.security.core.Authentication;</span><br><span class="line">import org.springframework.security.core.AuthenticationException;</span><br><span class="line">import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;</span><br><span class="line"></span><br><span class="line">import com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"></span><br><span class="line">public class CustomAuthenticationFilter extends UsernamePasswordAuthenticationFilter &#123;</span><br><span class="line">	@Override</span><br><span class="line">	public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)</span><br><span class="line">			throws AuthenticationException &#123;</span><br><span class="line">		if (request.getContentType().equals(MediaType.APPLICATION_JSON_UTF8_VALUE)</span><br><span class="line">				|| request.getContentType().equals(MediaType.APPLICATION_JSON_VALUE)) &#123;</span><br><span class="line">			ObjectMapper mapper = new ObjectMapper();</span><br><span class="line">			UsernamePasswordAuthenticationToken authRequest = null;</span><br><span class="line">			try (InputStream is = request.getInputStream()) &#123;</span><br><span class="line">				Map&lt;String, String&gt; authenticationBean = mapper.readValue(is, Map.class);</span><br><span class="line">				authRequest = new UsernamePasswordAuthenticationToken(authenticationBean.get(&quot;userName&quot;),</span><br><span class="line">						authenticationBean.get(&quot;password&quot;));</span><br><span class="line">			&#125; catch (IOException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">				authRequest = new UsernamePasswordAuthenticationToken(&quot;&quot;, &quot;&quot;);</span><br><span class="line">			&#125; finally &#123;</span><br><span class="line">				setDetails(request, authRequest);</span><br><span class="line">				return this.getAuthenticationManager().authenticate(authRequest);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			return super.attemptAuthentication(request, response);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="security配置类——MyPasswordEncoder"><a href="#security配置类——MyPasswordEncoder" class="headerlink" title="security配置类——MyPasswordEncoder"></a>security配置类——MyPasswordEncoder</h3><ul>
<li>密码编码解码器<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.security.crypto.bcrypt.BCrypt;</span><br><span class="line">import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line">import org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"></span><br><span class="line">public class MyPasswordEncoder implements PasswordEncoder&#123;</span><br><span class="line">	public static MyPasswordEncoder m = new MyPasswordEncoder();</span><br><span class="line">	</span><br><span class="line">	@Override</span><br><span class="line">	public String encode(CharSequence arg0) &#123;</span><br><span class="line">		return new BCryptPasswordEncoder().encode(arg0.toString());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public boolean matches(CharSequence raw, String encode) &#123;</span><br><span class="line">		return BCrypt.checkpw(raw.toString(), encode);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="用户服务类–UserService"><a href="#用户服务类–UserService" class="headerlink" title="用户服务类–UserService"></a>用户服务类–UserService</h3><ul>
<li>这个类是为了调用数据库中用户，密码与权限所使用的。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line">import org.springframework.security.core.GrantedAuthority;</span><br><span class="line">import org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line">import org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line">import ink.mastermind.AllINOne.dao.UserDao;</span><br><span class="line">import ink.mastermind.AllINOne.pojo.User;</span><br><span class="line">import ink.mastermind.AllINOne.security.MyPasswordEncoder;</span><br><span class="line"></span><br><span class="line">@Service(&quot;userService&quot;)</span><br><span class="line">public class UserService implements UserDetailsService &#123;</span><br><span class="line"></span><br><span class="line">	@Resource</span><br><span class="line">	private UserDao userDao;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * @param user 注册用户</span><br><span class="line">	 */</span><br><span class="line">	@Transactional</span><br><span class="line">	public void register(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		user.setPassword(MyPasswordEncoder.m.encode(user.getPassword()));</span><br><span class="line">		this.userDao.save(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * @param user</span><br><span class="line">	 * @return 通过用户名查找用户并返回</span><br><span class="line">	 */</span><br><span class="line">	@Transactional</span><br><span class="line">	public List&lt;User&gt; findUserByUserName(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		return this.userDao.findByUserName(user.getUserName());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * security模块</span><br><span class="line">	 */</span><br><span class="line">	public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException &#123;</span><br><span class="line">		// 调用持久层接口方法查找用户</span><br><span class="line">		List&lt;User&gt; l = this.userDao.findByUserName(userName);</span><br><span class="line">		User user = (l != null &amp;&amp; !l.isEmpty()) ? l.get(0) : null;</span><br><span class="line">		if (user == null) &#123;</span><br><span class="line">			throw new UsernameNotFoundException(&quot;用户名不存在&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		// 创建List集合，用来保存用户权限，GrantedAuthority对象代表赋予给当前用户的权限</span><br><span class="line">		List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;GrantedAuthority&gt;();</span><br><span class="line">		authorities.add(new SimpleGrantedAuthority(user.getRole()));</span><br><span class="line">		return new org.springframework.security.core.userdetails.User(user.getUserName(), user.getPassword().trim(),</span><br><span class="line">				authorities);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="JSON自制封装模块"><a href="#JSON自制封装模块" class="headerlink" title="JSON自制封装模块"></a>JSON自制封装模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">public class Json &#123;</span><br><span class="line">	private Integer status;</span><br><span class="line">	private String information;</span><br><span class="line">	private Object object;</span><br><span class="line"></span><br><span class="line">	public Json() &#123;</span><br><span class="line">		super();</span><br><span class="line">		// TODO Auto-generated constructor stub</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Integer getStatus() &#123;</span><br><span class="line">		return status;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setStatus(Integer status) &#123;</span><br><span class="line">		this.status = status;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getInformation() &#123;</span><br><span class="line">		return information;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setInformation(String information) &#123;</span><br><span class="line">		this.information = information;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Object getObject() &#123;</span><br><span class="line">		return object;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setObject(Object object) &#123;</span><br><span class="line">		this.object = object;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Json [status=&quot; + status + &quot;, information=&quot; + information + &quot;, object=&quot; + object + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Json(Integer status, String information, Object object) &#123;</span><br><span class="line">		super();</span><br><span class="line">		this.status = status;</span><br><span class="line">		this.information = information;</span><br><span class="line">		this.object = object;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><ul>
<li><a href="https://segmentfault.com/a/1190000018157525?utm_soburce=tag-newest" target="_blank" rel="noopener">原来链接</a></li>
</ul>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/zhongqian97">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/zhongqian97">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="#">It helps SEO</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
